<link rel="import" href="bower_components/note-app-elements/na-elements.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="bower_components/polymerfire/polymerfire.html">


<dom-module id="note-app">
  <template>
    <style include="note-app-shared-styles"></style>    
    <na-toolbar signed-in="[[signedIn]]"
    on-sign-out="signOut"></na-toolbar>

    <na-login on-sign-in="signIn"
    signed-in="[[signedIn]]"
    disabled="[[!online]]" ></na-login>

    <firebase-auth
        id="auth"
        app-name="notes"
        provider=""
        signed-in="{{signedIn}}"
        user="{{user}}" 
        on-error="errorHandler" 
        on-login="onSuccess" >
    </firebase-auth>
    
     <paper-button id="login-button" on-tap="_logIn" raised>Login</paper-button>

  </template>

  <script>
    Polymer({
      is: 'note-app',
      behaviors: [Polymer.NoteAppBehavior],

    //   signIn: function() {
    //         this.$.auth.signInWithPopup();
    //   }

       _logIn: function() {                
          var params = {
            email : 'nilesh@mobiuso.com',
            password : '123456'
          };

          this.$.auth.signInWithEmailAndPassword('nilesh@mobiuso.com','123456');
        },

        errorHandler: function(e) {
          this.message = 'Error: ' + e.detail.message;
        },

        onSuccess: function(e) {
          console.log('success' + e);        
        },

    });
  </script>
</dom-module>